<partial name="_Notification" />
<div class="container">
	<h1>Repositories Import/Export Plugin</h1>
	<hr />
	<h2>I. Generate Excel File With All Repositories</h2>
	<div class="bs-component">
		<input id="export_button" class="btn btn-primary m-4 button-file-export" value="Export" />
		<button id="refresh_button" class="source-button btn btn-primary btn-xs" type="button" tabindex="0">
			<i class="bi bi-arrow-clockwise"></i>
		</button>
	</div>
	<br />
	<h2>II. Import Excel File To Generate Repositories</h2>
	<div class="row">
		<div class="col-lg-6">
			<div class="bs-component">
				<form asp-area="@WebConstants.AdminAreaName" asp-action="Import" asp-controller="RepositoryImportExportPlugin" method="post" enctype="multipart/form-data">
					<div class="form-group">
						<label for="formFile" class="form-label mt-4">Excel file input</label>
						<input class="form-control" type="file" id="formFile" name="file">
					</div>
					<div class="form-group m-2">
						<button type="submit" class="btn btn-primary">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

@section Scripts{
	<script>
		document.getElementById('refresh_button').disabled = true;

		document.getElementById('export_button').addEventListener('click', function (e) {
			e.preventDefault();

			let exportButton = document.querySelector('.button-file-export');
			exportButton.disabled = true;

			let refreshButton = document.getElementById('refresh_button');
			refreshButton.disabled = false;

			window.location = '/Admin/RepositoryImportExportPlugin/Export';
		});

		document.getElementById('refresh_button').addEventListener('click', function (e) {
			e.preventDefault();

			let exportButton = document.querySelector('.button-file-export');
			exportButton.disabled = false;

			let refreshButton = document.getElementById('refresh_button');
			refreshButton.disabled = true;
		});
	</script>
}